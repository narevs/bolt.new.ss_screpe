<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Panel - Scholar Summit</title>
  <link rel="stylesheet" href="./src/styles/admin.css">
</head>
<body>
  <div class="admin-container">
    <header class="admin-header">
      <h1>Admin Panel</h1>
      <button id="closeAdminBtn" class="btn btn-secondary">Close</button>
    </header>
    
    <div class="admin-content">
      <div class="admin-tabs">
        <button class="tab-btn active" data-tab="users">Users</button>
        <button class="tab-btn" data-tab="licenses">Licenses</button>
        <button class="tab-btn" data-tab="stats">Statistics</button>
      </div>
      
      <!-- Users Tab -->
      <div class="tab-content active" id="usersTab">
        <div class="tab-header">
          <h2>User Management</h2>
          <button id="addUserBtn" class="btn btn-primary">Add User</button>
        </div>
        
        <div class="users-table">
          <table>
            <thead>
              <tr>
                <th>ID</th>
                <th>Username</th>
                <th>Role</th>
                <th>Created</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="usersTableBody">
              <!-- Users will be populated here -->
            </tbody>
          </table>
        </div>
      </div>
      
      <!-- Licenses Tab -->
      <div class="tab-content" id="licensesTab">
        <div class="tab-header">
          <h2>License Management</h2>
          <button id="generateLicenseBtn" class="btn btn-primary">Generate License</button>
        </div>
        
        <div class="licenses-table">
          <table>
            <thead>
              <tr>
                <th>License Key</th>
                <th>Username</th>
                <th>Expires</th>
                <th>Seats</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="licensesTableBody">
              <!-- Licenses will be populated here -->
            </tbody>
          </table>
        </div>
      </div>
      
      <!-- Statistics Tab -->
      <div class="tab-content" id="statsTab">
        <div class="tab-header">
          <h2>Usage Statistics</h2>
          <button id="exportStatsBtn" class="btn btn-secondary">Export Stats</button>
        </div>
        
        <div class="stats-grid">
          <div class="stat-card">
            <h3>Total Users</h3>
            <div class="stat-value" id="totalUsersCount">0</div>
          </div>
          <div class="stat-card">
            <h3>Active Licenses</h3>
            <div class="stat-value" id="activeLicensesCount">0</div>
          </div>
          <div class="stat-card">
            <h3>Total Sessions</h3>
            <div class="stat-value" id="totalSessionsCount">0</div>
          </div>
          <div class="stat-card">
            <h3>Emails Collected</h3>
            <div class="stat-value" id="totalEmailsCount">0</div>
          </div>
        </div>
        
        <div class="recent-activity">
          <h3>Recent Activity</h3>
          <div class="activity-list" id="activityList">
            <!-- Recent activity will be populated here -->
          </div>
        </div>
      </div>
    </div>
    
    <!-- Modals -->
    <div class="modal" id="addUserModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Add New User</h3>
          <button class="modal-close">&times;</button>
        </div>
        <form id="addUserForm">
          <div class="form-group">
            <label for="newUsername">Username</label>
            <input type="text" id="newUsername" required class="form-control">
          </div>
          <div class="form-group">
            <label for="newPassword">Password</label>
            <input type="password" id="newPassword" required class="form-control">
          </div>
          <div class="form-group">
            <label for="newRole">Role</label>
            <select id="newRole" class="form-control">
              <option value="operator">Operator</option>
              <option value="admin">Admin</option>
            </select>
          </div>
          <div class="modal-actions">
            <button type="button" class="btn btn-secondary modal-close">Cancel</button>
            <button type="submit" class="btn btn-primary">Create User</button>
          </div>
        </form>
      </div>
    </div>
    
    <div class="modal" id="generateLicenseModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Generate License</h3>
          <button class="modal-close">&times;</button>
        </div>
        <form id="generateLicenseForm">
          <div class="form-group">
            <label for="licenseUsername">Username</label>
            <select id="licenseUsername" required class="form-control">
              <!-- Users will be populated here -->
            </select>
          </div>
          <div class="form-group">
            <label for="licenseExpiry">Expiry Date</label>
            <input type="date" id="licenseExpiry" required class="form-control">
          </div>
          <div class="form-group">
            <label for="licenseSeats">Seats</label>
            <input type="number" id="licenseSeats" value="1" min="1" max="10" class="form-control">
          </div>
          <div class="form-group">
            <label>Features</label>
            <div class="checkbox-group">
              <label><input type="checkbox" name="features" value="ocr" checked> OCR Support</label>
              <label><input type="checkbox" name="features" value="mx" checked> MX Validation</label>
              <label><input type="checkbox" name="features" value="export" checked> Export Functions</label>
            </div>
          </div>
          <div class="modal-actions">
            <button type="button" class="btn btn-secondary modal-close">Cancel</button>
            <button type="submit" class="btn btn-primary">Generate License</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  
  <script type="module" src="/src/admin.js"></script>
</body>
</html>